# Техническое задание: Разработка методики тестирования ECMP Hash

## Цель задачи

Разработать методику проверки корректности работы механизма ECMP (Equal-Cost Multi-Path) маршрутизации с использованием hash-алгоритма по Source IP адресу.

## Контекст

В сетевых устройствах (коммутаторах, маршрутизаторах) для обеспечения отказоустойчивости и распределения нагрузки используется механизм ECMP - равнозначная многоуровневая маршрутизация. При наличии нескольких маршрутов с одинаковой стоимостью (метрикой) к одному пункту назначения, устройство должно равномерно распределять трафик между этими путями.

Для определения, какой именно путь использовать для конкретного потока, применяется hash-алгоритм. Hash вычисляется на основе параметров пакета (например, Source IP, Destination IP, порты, протокол) и определяет выбор одного из доступных ECMP путей.

**Задача:** Разработать методику тестирования, которая позволит проверить, что при настройке hash-алгоритма только на Source IP адрес, трафик с разными Source IP адресами корректно распределяется по доступным ECMP путям.

## Что нужно сделать

Вам необходимо описать методику тестирования ECMP hash по Source IP. Решение должно включать описание следующих аспектов:

### 1. Топология и конфигурация

Опишите, какая сетевая топология потребуется для тестирования и какие настройки необходимо выполнить.

### 2. Генерация тестового трафика

Опишите, какой трафик необходимо сгенерировать для проверки работы ECMP hash по Source IP. Какие параметры пакетов должны варьироваться, а какие оставаться постоянными?

### 3. Методика захвата трафика

Опишите, как и где необходимо захватывать трафик для последующего анализа распределения потоков.

### 4. Анализ результатов

Опишите, какие метрики необходимо вычислить и какие критерии использовать для оценки корректности работы механизма.

## Требования к решению

Решение должно быть представлено в формате готовой реализации, включающее:

- **Скрипты/код** для создания топологии
- **Скрипты для настройки** ECMP и hash-алгоритма
- **Скрипты для генерации трафика**
- **Скрипты для захвата трафика**
- **Анализатор результатов** - скрипт для парсинга логов и вычисления метрик распределения
- **Инструкция по запуску** - пошаговое руководство по развертыванию и запуску теста
- **Инструкция по проверке** - описание того, как проверить результаты и интерпретировать вывод

